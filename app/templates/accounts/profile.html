<!--
    MAIN PROFILE PAGE

    .container-nav
    .container-header
    .profile-section

-->

{% extends "base.html" %}

{% block content %}
    <nav class="container-nav">
        <ul> {# eller använd .profile-nav ul #}
            <li><a href="" class="current">Profil</a></li>
            <li><a href="">Anställning</a></li>
            <li><a href="">Kompetens</a></li>
            <li><a href="">Kontakt</a></li>
        </ul>
    </nav> <!-- /.profile-nav -->

    <header class="container-header">

        <div class="profile-header-person">
            <h2>{{ user.first_name|capitalize }} {{user.last_name|capitalize }}</h2> {# get_full_name()? #}

            <div class="employment-type"> 
                <i class="fas fa-user"></i>
                <p>
                    <!--{% if user.emp_type %}
                        {{ user.emp_type|capitalize }} 
                    {% else %}
                        Anställd
                    {% endif %}-->
                </p> {# rights or emp_type? #}
            </div> <!-- /.employment-type -->
        </div> <!-- /.profile-header-person -->
        
        {# {% if user == current_user %}
            <div class="edit-profile">
                <p><a href="{{ url_for('edit_profile') }}">Redigera</a></p>
            </div> <!-- /.edit-profile -->
        {% endif %} #}

        <div class="profile-header-img">
            <img src="#" alt="{{ user.first_name|capitalize }} {{ user.last_name|capitalize }}s profilbild">

            <a id="upload_img" href="#" title="Ladda upp en ny profilbild">
                <button>Ändra</button>
            </a>

            <a id="delete_img" href="#" title="Ta bort din profilbild och få tillbaka bilden av Al!">
                <button>
                    Ta bort
                </button>
            </a>
        </div>

    </header> <!-- /.profile-header -->

    <section id="profile-section" class="container-section">

        <ul>
            <li>Telefonnummer
                <ul>
                    <li>
                        {% if user.phone %}
                            {{ user.phone }}
                        {% else %}
                            Telefonnummer saknas
                        {% endif %}
                    </li>
                </ul>
            </li>
            <li>E-postadress
                <ul>
                    <li>
                        {% if user.email %}
                            {{ user.email }}
                        {% else %}
                            E-postadress saknas
                        {% endif %}
                    </li>
                </ul>
            </li>
            {% if user.username = request.user.username or user.is_staff or user.is_superuser %}
                <li>Anställnings-ID
                    <ul>
                        <li>
                            {% if user.empid %}
                                {{ user.empid }}
                            {% else %}
                                Telefonnummer saknas
                            {% endif %}
                        </li>
                    </ul>
                </li>
            {% endif %}
            <li>Anställningsform
                <ul>
                    <li>
                        <!--{% if user.emp_type %}
                            {{ user.emp_type }}
                        {% else %}
                            Anställningsform saknas
                        {% endif %}-->
                    </li>
                </ul>
            </li>
            <li>Kompetensområden
                <ul>
                    <li>
                        {# Get depid_f(dep_empid) of empid_f(depemp_id) == emp_id(person), then get name(department) where dep_id(department) == depid_f(depemp_id) #}
                        {% if departments %}
                            {% for i in departments %}
                                {{ i }} {# Comma after each, except for the last – perhaps a solution for back-end? #}
                            {% endfor %}
                        {% else %}
                            Områden saknas
                        {% endif %}
                    </li>
                </ul>
            </li>
        </ul>

        <div class="emergency-contacts">
            <h3>Närmaste anhöriga</h3>
            {% if next_of_kin %} {# or 'if next_of_kin != None'? Requires that we send data to variable next_of_kin #}
                <ol>
                    {% for i in next_of_kin %}
                    <li>
                        <ul>
                            <li>{{ i.name }}</li>
                            <li>{{ i.phone }}</li>
                        </ul>
                    </li>
                    {% endfor %}
                </ol>
            {% else %}
                Det finns inga angivna närmaste anhöriga.
            {% endif %}
        </div> <!-- /.emergency-contacts -->
    </section> <!-- /.profile-section -->

{% endblock %}
